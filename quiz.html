<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Квиз по областям</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <link rel="stylesheet" href="quiz_assets/css/style.css">
</head>
<body>

  <div class="card" id="app">
    <button class="theme-toggle" id="theme-toggle" title="Сменить тему">
      <span class="icon" id="theme-icon">
        <i class="fa-solid fa-sun"></i>
      </span>
    </button>

    <h1 id="page-title">Квиз по областям</h1>
    <p class="lead">Выберите область и пройдите квиз. Результаты сохраняются в лидерборд.</p>

    <div id="start-screen">
      <div class="input-row">
        <div class="input-group">
          <div class="name-input">
            <input id="player" type="text" placeholder="Введите имя..." />
          </div>
          <div style="min-width:140px;">
            <button id="start-btn" class="btn">Начать</button>
          </div>
        </div>
        <div class="leaders-btn-container" style="min-width:140px;">
          <button id="view-leaders" class="ghost">Лидеры</button>
        </div>
      </div>

      <div>
        <label style="display:block;margin-bottom:8px;font-weight:600;">Выберите область:</label>
        <div class="areas-grid" id="areasGrid"></div>
      </div>
    </div>

    <div id="quiz-screen" class="hidden">
      <div class="progress">
        <div id="progress-text">Вопрос 1/10</div>
        <div id="region-label" style="opacity:0.85;font-weight:600;"></div>
      </div>

      <div class="question" id="question-text">Вопрос</div>
      <div class="options" id="options"></div>
      <div id="explanation-container"></div>

      <div class="auto-next-timer" aria-hidden="true">
        <div class="auto-next-progress" id="auto-next-progress"></div>
      </div>

      <div style="display:flex; gap:10px; margin-top:14px;">
        <button id="skip-btn" class="ghost">Пропустить</button>
        <button id="end-btn" class="ghost">Завершить</button>
      </div>
    </div>

    <div id="result-screen" class="hidden">
      <div class="result-center">
        <h2>Результат</h2>
        <div class="score-big" id="final-score">0 / 100</div>
        <div id="time-result" style="opacity:0.85;">Время: 0 сек</div>
        <p id="result-text"></p>
        <p id="saving-text" style="font-style:italic; opacity:0.8;"></p>
        <div style="display:flex; gap:10px; justify-content:center; margin-top:12px;">
          <button id="play-again" class="ghost">Играть снова</button>
          <button id="view-leaders-2" class="ghost">Лидеры</button>
        </div>
      </div>
    </div>

    <div id="leaders-screen" class="hidden">
      <h2>Лидеры — <span id="leaders-region-name">—</span></h2>
      <table aria-live="polite">
        <thead>
          <tr><th>#</th><th>Имя</th><th>Очки</th><th>Время</th></tr>
        </thead>
        <tbody id="leaders-body">
        </tbody>
      </table>
      <div style="display:flex; gap:10px; margin-top:12px;">
        <button id="back-home" class="ghost">На главную</button>
        <button id="refresh-leaders" class="ghost">Обновить</button>
      </div>
    </div>

    <footer id="footer-note">Данные сохраняются в облачной базе </footer>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>  
  <script src="quiz_assets/js/questions.js"></script>
  <script src="quiz_assets/js/achievement.js"></script>
  <script src="quiz_assets/js/main.js"></script>
</body>
</html>
